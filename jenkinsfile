pipeline {  
  agent any  
 tools { nodejs 'node23' }  
 
stages {  
  stage('Clean Workspace') { 
  steps { cleanWs() } }  
 
stage('Clone Repo') { 
  steps {  
     git 'https://github.com/KastroVKiran/Zomato-  Project –    
                        kastro.git’                                  
     } 
  }   
stage('Install Dependencies') {  
    steps { sh 'npm install' } 
 }   
stage('Build Docker Image') { 
    steps {  
        sh "docker build -t mdk18/zomato:latest ."  
      }  
    }  
  
    stage('Push to DockerHub') {  
      steps {  
        withCredentials([usernamePassword(credentialsId: 
'DOCKER_HUB',  
usernameVariable: 'DH_USER', passwordVariable: 
'DH_PASS')]) {  
          sh 'echo $DH_PASS | docker login -u $DH_USER 
                 password-stdin'  
          sh "docker push mdk18/zomato:latest"  
        }  
      }  
    }  
  
    stage('Run Application') {  
      steps {  
        sh "docker rm -f zomato || true"  
        sh "docker run -d --name zomato -p 3000:3000  
mdk18/zomato:latest 
                                
       }  
    }  
  }  
  
  post {  
    always {  
      echo 'Pipeline finished successfully!'  
    }  
  }  
}
